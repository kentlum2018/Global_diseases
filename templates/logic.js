data = [
    {
      "disease": [
        {
          "max_lat": 9.081999, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.18999999999999997, 
      "year": 1980
    }, 
    {
      "disease": [
        {
          "max_lat": 14.497401000000002, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.19999999999999998, 
      "year": 1981
    }, 
    {
      "disease": [
        {
          "max_lat": 7.946527000000001, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.09, 
      "year": 1982
    }, 
    {
      "disease": [
        {
          "max_lat": 12.238333, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.23, 
      "year": 1983
    }, 
    {
      "disease": [
        {
          "max_lat": 12.238333, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.12, 
      "year": 1984
    }, 
    {
      "disease": [
        {
          "max_lat": 12.238333, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.0, 
      "year": 1985
    }, 
    {
      "disease": [
        {
          "max_lat": 9.081999, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.12, 
      "year": 1986
    }, 
    {
      "disease": [
        {
          "max_lat": 21.00789, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.22, 
      "year": 1987
    }, 
    {
      "disease": [
        {
          "max_lat": 9.081999, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.30000000000000004, 
      "year": 1988
    }, 
    {
      "disease": [
        {
          "max_lat": 9.081999, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.18999999999999997, 
      "year": 1989
    }, 
    {
      "disease": [
        {
          "max_lat": 9.081999, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.30000000000000004, 
      "year": 1990
    }, 
    {
      "disease": [
        {
          "max_lat": 9.081999, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.33999999999999997, 
      "year": 1991
    }, 
    {
      "disease": [
        {
          "max_lat": 9.081999, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.19999999999999998, 
      "year": 1992
    }, 
    {
      "disease": [
        {
          "max_lat": 9.081999, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.17, 
      "year": 1993
    }, 
    {
      "disease": [
        {
          "max_lat": 9.081999, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.18999999999999997, 
      "year": 1994
    }, 
    {
      "disease": [
        {
          "max_lat": 9.30769, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.36, 
      "year": 1995
    }, 
    {
      "disease": [
        {
          "max_lat": 9.30769, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.24999999999999997, 
      "year": 1996
    }, 
    {
      "disease": [
        {
          "max_lat": 9.30769, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.33999999999999997, 
      "year": 1997
    }, 
    {
      "disease": [
        {
          "max_lat": 9.30769, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.56, 
      "year": 1998
    }, 
    {
      "disease": [
        {
          "max_lat": 12.238333, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.35, 
      "year": 1999
    }, 
    {
      "disease": [
        {
          "max_lat": 42.315407, 
          "min_lat": -38.416097, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 9.945587, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.36, 
      "year": 2000
    }, 
    {
      "disease": [
        {
          "max_lat": 42.315407, 
          "min_lat": -38.416097, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 14.497401000000002, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.37, 
      "year": 2001
    }, 
    {
      "disease": [
        {
          "max_lat": 42.315407, 
          "min_lat": -38.416097, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 12.238333, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.51, 
      "year": 2002
    }, 
    {
      "disease": [
        {
          "max_lat": 42.315407, 
          "min_lat": -38.416097, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 21.00789, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.47, 
      "year": 2003
    }, 
    {
      "disease": [
        {
          "max_lat": 42.315407, 
          "min_lat": -38.416097, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 12.238333, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }
      ], 
      "temp": 0.49, 
      "year": 2004
    }, 
    {
      "disease": [
        {
          "max_lat": 42.315407, 
          "min_lat": -38.416097, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 17.570692, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 36.204824, 
          "min_lat": -38.416097, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.54, 
      "year": 2005
    }, 
    {
      "disease": [
        {
          "max_lat": 42.315407, 
          "min_lat": -38.416097, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 12.238333, 
          "min_lat": -9.189967, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 36.204824, 
          "min_lat": -38.416097, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.51, 
      "year": 2006
    }, 
    {
      "disease": [
        {
          "max_lat": 42.315407, 
          "min_lat": -38.416097, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 8.619543, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 40.463667, 
          "min_lat": -38.416097, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.55, 
      "year": 2007
    }, 
    {
      "disease": [
        {
          "max_lat": 42.315407, 
          "min_lat": -38.416097, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 12.238333, 
          "min_lat": -38.416097, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 40.463667, 
          "min_lat": -38.416097, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.41000000000000003, 
      "year": 2008
    }, 
    {
      "disease": [
        {
          "max_lat": 41.20438, 
          "min_lat": -38.416097, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 17.570692, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 40.463667, 
          "min_lat": -38.416097, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.53, 
      "year": 2009
    }, 
    {
      "disease": [
        {
          "max_lat": 41.377491, 
          "min_lat": -38.416097, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 17.570692, 
          "min_lat": -9.189967, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 41.87194, 
          "min_lat": -40.900557, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.6, 
      "year": 2010
    }, 
    {
      "disease": [
        {
          "max_lat": 40.143105, 
          "min_lat": -30.559482, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 17.607789, 
          "min_lat": -9.189967, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 35.86166, 
          "min_lat": -38.416097, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.49, 
      "year": 2011
    }, 
    {
      "disease": [
        {
          "max_lat": 40.143105, 
          "min_lat": -30.559482, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 56.130366, 
          "min_lat": -9.189967, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 36.204824, 
          "min_lat": -38.416097, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.5, 
      "year": 2012
    }, 
    {
      "disease": [
        {
          "max_lat": 38.861034000000004, 
          "min_lat": -30.559482, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 15.454166, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 36.204824, 
          "min_lat": -40.900557, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.54, 
      "year": 2013
    }, 
    {
      "disease": [
        {
          "max_lat": 35.86166, 
          "min_lat": -30.559482, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 56.130366, 
          "min_lat": -9.189967, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 36.204824, 
          "min_lat": -40.900557, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.63, 
      "year": 2014
    }, 
    {
      "disease": [
        {
          "max_lat": 35.86166, 
          "min_lat": -30.559482, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 56.130366, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 40.463667, 
          "min_lat": -40.900557, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.74, 
      "year": 2015
    }, 
    {
      "disease": [
        {
          "max_lat": 35.86166, 
          "min_lat": -30.559482, 
          "name": "Malaria"
        }, 
        {
          "max_lat": 9.945587, 
          "min_lat": -14.235004, 
          "name": "Yellow Fever"
        }, 
        {
          "max_lat": 52.132633, 
          "min_lat": -38.416097, 
          "name": "Leprosy"
        }
      ], 
      "temp": 0.91, 
      "year": 2016
    }
  ]

// make map, initiated with earthquake info and background layer


// make light background layer
var streets = L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}", {
    attribution: "Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>",
    maxZoom: 18,
    id: "mapbox.streets",
    accessToken: "pk.eyJ1Ijoic2NoZWhyYmFub2toYW4iLCJhIjoiY2p0bHJ5bDhzMTJpajN5bzJweWNqdzdnNCJ9.Bvtb1eqW-2qQ91L4SggryQ"
});
var myMap = L.map("map", {
  center: [39.00, -50.0],
  zoom: 3,
  layers: [streets]
});
var years = [];
var yellist = [];
var leplist = [];
var mallist = [];
data.forEach(instance=>{
  // instance.year < 2000 ? years.push(instance.year.toString().slice(2,4)) : 
  years.push(instance.year.toString());

    instance.disease.forEach(disease=>{
      maxline = [[disease.max_lat,-1000],[disease.max_lat,1000]];
      minline = [[disease.min_lat,-1000],[disease.min_lat,1000]];

      if (disease.name == "Yellow Fever") {
        yellist.push(L.polyline(minline, {
          time: instance.year.toString(),
          color: 'yellow',
          weight: 1,
          opacity: 1,
          smoothFactor: 0
        }));
        yellist.push(L.polyline(maxline, {
          time: instance.year.toString(),
          color: 'yellow',
          weight: 1,
          opacity: 1,
          smoothFactor: 0
        }));
      } else if (disease.name == "Malaria") {
        mallist.push(L.polyline(minline, {
          time: `${instance.year}-01-01 08:42:26`,
          color: 'red',
          weight: 1,
          opacity: 1,
          smoothFactor: 0
        }));
        mallist.push(L.polyline(maxline, {
          time: `${instance.year}-01-01 08:42:26`,
          color: 'red',
          weight: 1,
          opacity: 1,
          smoothFactor: 0
        }));
      } else {
        leplist.push(L.polyline(minline, {
          time: instance.year.toString(),
          color: 'blue',
          weight: 1,
          opacity: 1,
          smoothFactor: 0
        }));
        leplist.push(L.polyline(maxline, {
          time: instance.year.toString(),
          color: 'blue',
          weight: 1,
          opacity: 1,
          smoothFactor: 0
        }));
      } 
  });
});
var overlayMaps = {
  "Malaria" : L.layerGroup(mallist),
  "Yellow Fever" : L.layerGroup(yellist),
  "Leprosy" : L.layerGroup(leplist)
};
var baseMaps = {'Streets' : streets};
var sliderControl = L.control.sliderControl({
  layer: L.layerGroup(mallist)
});
myMap.addControl(sliderControl);
sliderControl.startSlider();
$('#slider-timestamp').html(years);

// L.control.layers(baseMaps, overlayMaps, {collapsed:false}).addTo(myMap);




